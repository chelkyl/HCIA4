<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="results-area.css">
    <title>Web Mockup</title>
</head>

<body>
    <div class="main grey lighten-5">
        <div id="left-area" class="white">
            <div id="left-sidebar">
                <div id="inputs-area">
                    <p>Looking for space</p>
                    <div id="volume-option">
                        <p>
                            <label>
                                <input name="opt-volume" type="radio" value="1" />
                                <span>silence</span>
                            </label>
                        </p>
                        <p>
                            <label>
                                <input name="opt-volume" type="radio" value="2" />
                                <span>light chatter</span>
                            </label>
                        </p>
                        <p>
                            <label>
                                <input name="opt-volume" type="radio" value="3" />
                                <span>conversations</span>
                            </label>
                        </p>
                        <p>
                            <label>
                                <input name="opt-volume" type="radio" value="4" />
                                <span>party-level</span>
                            </label>
                        </p>
                    </div>
                    <div id="group-option">
                        <p>For</p>
                        <p>
                            <label>
                                <input name="opt-ppl" type="radio" value="1" />
                                <span>myself</span>
                            </label>
                        </p>
                        <p>
                            <label>
                                <input name="opt-ppl" type="radio" value="2" />
                                <span>a group of
                                    <input type="number" id="input-groupsize" placeholder="" />
                                </span>
                            </label>
                        </p>
                    </div>
                    <div id="distance-option">
                        <p>Within </p>
                        <input type="number" id="input-distance" name="distance" value="0" />
                        <p> miles</p>
                    </div>
                    <div id="location-option">
                        <p>Of</p>
                        <label>
                            <p class="waves-effect waves-light btn">
                                <input name="opt-location" type="radio" value="1" />
                                <span>my location</span>
                            </p>
                        </label>
                        <label>
                            <p class="waves-effect waves-light btn">
                                <input name="opt-location" type="radio" value="2" />
                                <span>address</span>
                            </p>
                        </label>
                        <div class="input-field">
                            <input type="text" id="input-location" name="opt-address" placeholder="address" />
                        </div>
                    </div>
                    <div id="amenities-option">
                        <p>With</p>
                        <p>
                            <label>
                                <input type="checkbox" name="extras" value="food and drink" class="filled-in" />
                                <span>food and drink</span>
                            </label>
                        </p>
                        <p>
                            <label>
                                <input type="checkbox" name="extras" value="wifi" class="filled-in" />
                                <span>Wi-Fi</span>
                            </label>
                        </p>
                        <p>
                            <label>
                                <input type="checkbox" name="extras" value="outlets" class="filled-in" />
                                <span>outlets</span>
                            </label>
                        </p>
                    </div>
                    <a class="waves-effect waves-light btn">
                        Find My Space
                    </a>
                </div>
            </div>
            <div id="left-sidebar-tab">
                <input type="checkbox" id="left-sidebar-tab-toggle" class="tab-toggle" hidden>
                <label for="left-sidebar-tab-toggle">
                    <div id="left-sidebar-tab-icon">
                        <div class="svg-container">
                            <svg version="1.1" id="Capa_1" viewBox="0 0 451.846 451.847" class="svg-content">
                                <g>
                                    <path d="M345.441,248.292L151.154,442.573c-12.359,12.365-32.397,12.365-44.75,0c-12.354-12.354-12.354-32.391,0-44.744
                		L278.318,225.92L106.409,54.017c-12.354-12.359-12.354-32.394,0-44.748c12.354-12.359,32.391-12.359,44.75,0l194.287,194.284
                		c6.177,6.18,9.262,14.271,9.262,22.366C354.708,234.018,351.617,242.115,345.441,248.292z" />
                                </g>
                            </svg>
                        </div>
                    </div>
                </label>
            </div>
        </div>
        <div id="left-sidebar-tab-placeholder">
        </div>
        <div id="upper-right-area" class="white">
            <!-- Google Maps -->
            <div class="google-maps">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1640.5468125052207!2d-82.83896859169491!3d34.67758644511011!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x88585e1135ab658d%3A0x8d3219cb792a8e56!2sClemson+University!5e0!3m2!1sen!2sus!4v1519779318854"
                    width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
            </div>
            <!-- End Google Maps -->
        </div>
        <div id="lower-right-area" class="white">
            <div id="filter-area" class="row grey lighten-5" style="padding-top: 0.25rem">
                <div id="sort-area" class="col s5 m5 l3">
                    <div id="sort-select-container">
                        <div id="sort-select" class="input-field">
                            <select id="results-sort">
                                <option value="1" selected>Distance</option>
                                <option value="2">Amenities</option>
                                <option value="3">Rating</option>
                            </select>
                        </div>
                        <!-- https://codepen.io/w3core/pen/DjLml -->
                    </div>
                </div>
                <div id="search-area" class="col s7 m7 l7 offset-l2">
                    <label for="results-search">
                        <div id="search-icon" class="inline-block grey lighten-2">
                            <div class="svg-container">
                                <svg version="1.1" viewBox="0 0 1024 1024" preserveAspectRatio="xMinYMin meet" class="svg-content">
                                    <path d="M1015 969L732 687q100-117 100-271 0-172-122-294T416 0 122 122 0 416t122 294 294 122q154 0 271-100l282 283q10 9 23 9t23-9q9-10 9-23t-9-23zM553 740q-65 28-137 28t-137-28q-63-26-112-75T92 553q-28-65-28-137t28-137q26-63 75-112t112-75q65-28 137-28t137 28q63 26 112 75t75 112q28 65 28 137t-28 137q-26 63-75 112t-112 75z"
                                    />
                                </svg>
                            </div>
                        </div>
                        <div id="search-inputarea" class="inline-block input-field">
                            <input type="text" id="results-search" name="search-input" placeholder="Type here to search" />
                        </div>
                    </label>
                </div>
            </div>
            <div id="results-status">

            </div>
            <div id="results-area">
                <!-- Sample result item
                <div class="result-item grey lighten-5">
                    <div class="result-item-section result-item-section-distance">
                        <p>
                            <span class="result-item-section-distance-number">1</span>mi
                        </p>
                    </div>
                    <div class="vertical-divider"></div>
                    <div class="result-item-section result-item-section-name">
                        <p>Name</p>
                        <p>Address</p>
                    </div>
                    <div class="vertical-divider"></div>
                    <div class="result-item-section result-item-section-amenities">
                        <div style="">1</div>
                        <div style="">2</div>
                        <div style="">3</div>
                        <div style="">4</div>
                        <div style="">5</div>
                        <div style="">6</div>
                        <div style="">7</div>
                        <div style="">1</div>
                        <div style="">2</div>
                        <div style="">3</div>
                        <div style="">4</div>
                        <div style="">5</div>
                        <div style="">6</div>
                        <div style="">7</div>
                    </div>
                    <div class="vertical-divider"></div>
                    <div class="result-item-section result-item-section-rating">
                        <p>
                            <span class="result-item-section-rating-number">2</span>/5&#9733;
                        </p>
                    </div>
                </div>
                <!-- End sample -->
            </div>
        </div>
    </div>

    <style>
        /*
        justify-items:
        align-items:

        justify-content:
        align-content:

        align-self:
        justify-self:

        justify-* is row axis
        align-* is column axis
        */

        #left-sidebar {
            padding-left: 1rem;
        }

        body {
            width: 100%;
            height: 100%;
            margin: 0;
        }

        .main {
            display: grid;
            grid-gap: 1px;
            width: 100vw;
            height: 100vh;
            grid-template-columns: 3fr 7fr;
            grid-template-rows: 1fr 1fr;
            /* justify-items: center;
            align-items: center; */
            place-items: stretch stretch;
            justify-content: space-between;
            align-content: space-between;
        }

        #left-area {
            grid-column: 1;
            grid-row: span 2;
            background-color: white;
            display: flex;
            flex-direction: row;
        }

        #left-sidebar-tab,
        #left-sidebar-tab-placeholder {
            display: none;
            width: 35px;
            height: 100%;
        }

        #left-sidebar-tab-toggle+label {
            display: flex;
            width: 100%;
            height: 100%;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
        }

        #left-sidebar {
            flex-grow: 4;
            height: 100%;
            overflow-y: auto;
        }

        #inputs-area {
            position: relative;
        }

        #upper-right-area {
            grid-column: 2;
            grid-row: 1;
            background-color: white;
        }

        #lower-right-area {
            grid-column: 2;
            grid-row: 2;
            background-color: white;
            overflow-y: auto;
        }

        @media only screen and (max-width: 992px) {
            .main {
                grid-template-columns: 4fr 6fr;
            }
        }

        @media only screen and (max-width: 600px) {
            :root {
                --left-sidebar-width: calc(100vw - 35px);
            }
            .main {
                grid-template-columns: 0fr 7fr;
            }
            #left-area {
                position: absolute;
                width: 100vw;
                height: 100vh;
                z-index: 10;
            }
            #left-sidebar-tab {
                display: block;
            }
            #left-sidebar-tab-placeholder {
                display: block;
            }
            .sidebar-hide {
                transform: translateX(calc(-1*var(--left-sidebar-width)));
            }
            .sidebar-hide svg {
                transition: transform 0.1s ease-in-out;
                transform: rotate(180deg);
            }
        }

        .sidebar-animate-transform {
            transition: transform 0.2s ease-out;
        }

        input::placeholder {
            color: black;
        }

        .inline-block {
            display: inline-block;
        }

        .svg-container {
            display: inline-block;
            position: relative;
            width: 100%;
            padding-bottom: 100%;
            vertical-align: middle;
            overflow: hidden;
        }

        .svg-content {
            display: inline-block;
            position: absolute;
            top: 0;
            left: 0;
        }

        .google-maps {
            position: relative;
            padding-bottom: 0%;
            height: 100%;
        }

        .google-maps iframe {
            width: 100%;
            height: 100%;
        }
    </style>

    <script>
        var resultsSort = $('#results-sort');
        var resultsSortI = M.FormSelect.init(resultsSort, { classes: "chip select-chip" });
        var leftArea = $('#left-area');
        var inputsDiv = $('#inputs-area');
        var chipSelect = $('.select-chip')[0];
        var chipSelectInput = $('.select-chip>input')[0];
        var chipSelectPrompt = document.createElement("p");
        chipSelectPrompt.innerHTML = "Sort&nbsp;By:";
        chipSelect.prepend(chipSelectPrompt);
        chipSelectInput.size = 20;
        var leftSidebarToggle = $('#left-sidebar-tab-toggle');
        leftSidebarToggle.change(toggleLeftSidebar);
        var userLatitude;
        var userLongitude;

        function toggleLeftSidebar(e) {
            leftArea.animate({ opacity: 1 }, {
                step: function () {
                    leftArea.addClass('sidebar-animate-transform');
                    if (e.target.checked) {
                        leftArea.addClass('sidebar-hide');
                    }
                    else {
                        leftArea.removeClass('sidebar-hide');
                    }
                },
                duration: 200,
                complete: function () {
                    leftArea.removeClass('sidebar-animate-transform');
                }
            })
        }
        var geo_options = {
            enableHighAccuracy: true,
            maximumAge: 30000,
            timeout: 30000
        };
        function saveCoords(position) {
            userLatitude = position.coords.latitude;
            userLongitude = position.coords.longitude;
            console.log("Position: " + userLatitude + ", " + userLongitude);

            var sampleQuery = {
                "coords": {
                    "longitude": userLongitude,
                    "latitude": userLatitude
                },
                "distance": "10",
                "capacity": "1",
                "volume": {
                    "max": "4",
                    "min": "1"
                },
                "amenities": ["wifi"]
            };
            updateSuggestions(sampleQuery);
        }
        function geolocationError(error) {
            alert("Error " + error.code + ": " + error.message);
        }
        function updateLocation() {
            if ("geolocation" in navigator) {
                // geolocation is available
                navigator.geolocation.getCurrentPosition(saveCoords, geolocationError, geo_options);
            } else {
                // geolocation NOT available
                console.log("Geolocation not available");
                alert("Geolocation not available. Try accessing from HTTPS or localhost.");
            }
        }
        updateLocation();
    </script>
    <script src="database-scripts.js"></script>
    <script src="results-scripts.js"></script>

</body>

</html>